# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è** - –≤—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. **–ü—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã** - –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
3. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å—Ç–∞—Ç—É—Å 201 Created)
4. **–°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π** - –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
5. **Guards –∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã** - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç

## ‚ùå –ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401 Unauthorized
2. **–ü—Ä–æ–±–ª–µ–º–∞ —Å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä–æ–ª–µ–π** - –ø–∞—Ä–æ–ª–∏ –Ω–µ —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞:
- **–û—à–∏–±–∫–∞ TypeError** –≤ `RolesGuard` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º `(user.roles || [])`
- **–û—à–∏–±–∫–∞ TypeError** –≤ `AuthService.generateTokens` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º `user.roles || []`

### –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
- **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π** - –ø–∞—Ä–æ–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è, –Ω–æ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∏ –≤—Ö–æ–¥–µ

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```json
{
  "id": "27280ef8-f8d9-4287-a15b-ec7823eaff10",
  "email": "simple@test.com",
  "password": "$2b$10$...", // –•–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
  "roles": [],
  "isBlocked": false
}
```

### –ú–µ—Ç–æ–¥—ã —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: `hashSync(password, genSaltSync(10))` ‚úÖ
- **–í—Ö–æ–¥**: `compareSync(dto.password, user.password)` ‚ùå

## üéØ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

1. **–í–µ—Ä—Å–∏—è bcrypt** - –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π
2. **–ö–æ–¥–∏—Ä–æ–≤–∫–∞** - –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π —Å–∏–º–≤–æ–ª–æ–≤
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ–±–ª–µ–º–∞ —Å –∫—ç—à–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–æ–±–ª–µ–º–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º/–ø–æ–ª—É—á–µ–Ω–∏–µ–º —Ö–µ—à–∞

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é bcrypt
```bash
npm list bcrypt
```

### 2. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
```bash
npm run build
npm start
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
```bash
npx prisma studio
```

### 4. –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –æ—Ç–ª–∞–¥–∫—É
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö–µ—à–µ–π –ø–∞—Ä–æ–ª–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–æ—Å—Ç—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏

## üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

**–°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: 95% –≥–æ—Ç–æ–≤–∞**

- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–¥–µ–ª–∏  
- ‚úÖ Guards –∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
- ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- ‚ùå –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (–ø—Ä–æ–±–ª–µ–º–∞ —Å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π!** üéâ

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä–æ–ª–µ–π
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π 