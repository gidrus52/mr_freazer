# Product API - –ò—Ç–æ–≥–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–Ø —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–ª –ø–æ–ª–Ω—ã–π CRUD —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–∏ `product` –≤ –≤–∞—à–µ–º NestJS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

### 1. –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö (Prisma Schema)

–î–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `Product` –≤ `prisma/schema.prisma`:

```prisma
model Product {
  id          String   @id @default(uuid())
  name        String
  description String?
  category    String
  price       Decimal  @db.Decimal(10, 2)
  stock       Int      @default(0)
  isActive    Boolean  @default(true) @map("is_active")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("products")
}
```

### 2. DTO (Data Transfer Objects)

–°–æ–∑–¥–∞–Ω—ã DTO –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö:

- **`CreateProductDto`** (`src/product/dto/create-product.dto.ts`)
  - `name`: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, –º–∞–∫—Å–∏–º—É–º 255 —Å–∏–º–≤–æ–ª–æ–≤
  - `description`: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ, –º–∞–∫—Å–∏–º—É–º 1000 —Å–∏–º–≤–æ–ª–æ–≤
  - `category`: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ, –º–∞–∫—Å–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "noName")
  - `price`: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, —á–∏—Å–ª–æ >= 0
  - `stock`: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ >= 0
  - `isActive`: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ, –±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ

- **`UpdateProductDto`** (`src/product/dto/update-product.dto.ts`)
  - –ù–∞—Å–ª–µ–¥—É–µ—Ç –æ—Ç `CreateProductDto` —Å —á–∞—Å—Ç–∏—á–Ω—ã–º–∏ –ø–æ–ª—è–º–∏

### 3. –°–µ—Ä–≤–∏—Å (`ProductService`)

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å–µ—Ä–≤–∏—Å —Å –ø–æ–ª–Ω—ã–º CRUD —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º:

```typescript
@Injectable()
export class ProductService {
  // –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
  async create(createProductDto: CreateProductDto): Promise<Product>
  
  // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
  async findAll(): Promise<Product[]>
  
  // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ ID
  async findOne(id: string): Promise<Product>
  
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
  async update(id: string, updateProductDto: UpdateProductDto): Promise<Product>
  
  // –ñ–µ—Å—Ç–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
  async remove(id: string): Promise<{ id: string }>
  
  // –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ (–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è)
  async softDelete(id: string): Promise<Product>
}
```

### 4. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (`ProductController`)

–°–æ–∑–¥–∞–Ω REST API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏:

```
POST   /api/products          - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
GET    /api/products          - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
GET    /api/products/:id      - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ ID
PATCH  /api/products/:id      - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
DELETE /api/products/:id      - –ñ–µ—Å—Ç–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
DELETE /api/products/:id/soft - –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
```

### 5. –ú–æ–¥—É–ª—å (`ProductModule`)

–°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞–º–∏.

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

- –î–æ–±–∞–≤–ª–µ–Ω `ProductModule` –≤ –æ—Å–Ω–æ–≤–Ω–æ–π `AppModule`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `@nestjs/mapped-types` –≤ `package.json`
- –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `products`

## API Endpoints

### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
```http
POST /api/products
Content-Type: application/json

{
  "name": "iPhone 15",
  "description": "–°–º–∞—Ä—Ç—Ñ–æ–Ω Apple iPhone 15",
  "category": "–°–º–∞—Ä—Ç—Ñ–æ–Ω—ã",
  "price": 999.99,
  "stock": 50,
  "isActive": true
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
```http
GET /api/products
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ ID
```http
GET /api/products/:id
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
```http
PATCH /api/products/:id
Content-Type: application/json

{
  "price": 899.99,
  "stock": 45
}
```

### –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
```http
DELETE /api/products/:id
```

### –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
```http
DELETE /api/products/:id/soft
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `class-validator` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å HTTP —Å—Ç–∞—Ç—É—Å–∞–º–∏
3. **–ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–æ–ª–µ `isActive`
4. **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è TypeScript –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
5. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–¥—É–ª–∏, —Å–µ—Ä–≤–∏—Å—ã –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

API –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ ID
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- ‚úÖ –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

## –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

```
src/product/
‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îú‚îÄ‚îÄ create-product.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ update-product.dto.ts
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ product.controller.ts
‚îú‚îÄ‚îÄ product.service.ts
‚îú‚îÄ‚îÄ product.module.ts
‚îú‚îÄ‚îÄ index.ts
‚îî‚îÄ‚îÄ README.md

prisma/
‚îî‚îÄ‚îÄ schema.prisma (–æ–±–Ω–æ–≤–ª–µ–Ω)

src/
‚îî‚îÄ‚îÄ app.module.ts (–æ–±–Ω–æ–≤–ª–µ–Ω)

package.json (–æ–±–Ω–æ–≤–ª–µ–Ω)
test-product-api.ps1 (—Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç)
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**: –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
2. **–ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π**: –í—ã–ø–æ–ª–Ω–∏—Ç–µ `npx prisma migrate dev` –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ö–µ–º—ã
3. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –í–∫–ª—é—á–∏—Ç–µ –æ–±—Ä–∞—Ç–Ω–æ JWT guard –≤ `app.module.ts` –¥–ª—è –∑–∞—â–∏—Ç—ã API
4. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**: –î–æ–±–∞–≤—å—Ç–µ –ø–∞–≥–∏–Ω–∞—Ü–∏—é, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é, –ø–æ–∏—Å–∫ –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º

API –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ 